<!-- app/templates/partials/patient_header.html -->

{% if patient %}
<div class="patient-header patient-header--active" data-patient-icn="{{ patient.icn }}">
    <h1 class="patient-header__title">
        {{ patient.name_display }} ({{ patient.sex }}, {{ patient.age }})
    </h1>
    <p class="patient-header__subtitle">
        ICN: {{ patient.icn }} |
        SSN: ***-**-{{ patient.ssn_last4 }} |
        DOB: {{ patient.dob }} |
        Station: {{ patient.primary_station }}
        {% if patient.primary_station_name %}
        ({{ patient.primary_station_name }})
        {% endif %}
    </p>
</div>
<!-- Note: patient.icn may be "ICN100001" or "1016V123456" format -->
<!-- Flag button enable/disable and badge update handled by app.js htmx:afterSwap event -->

{% else %}
<div class="patient-header patient-header--empty">
    <h1 class="patient-header__title">
        No patient selected
    </h1>
    <p class="patient-header__subtitle">
        Click 'Select Patient' to begin
    </p>
</div>
<!-- Flag button disable handled by app.js htmx:afterSwap event -->
{% endif %}
