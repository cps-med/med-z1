<!-- app/templates/partials/patient_search_results.html -->

{% if results %}
<div class="search-results__list">
    {% for patient in results %}
    <div
        class="search-result-item"
        hx-post="/api/patient/set-context"
        hx-vals='{"icn": "{{ patient.icn }}"}'
        hx-target="#patient-header-container"
        hx-swap="innerHTML"
        data-modal-close="patient-search-modal"
        tabindex="0"
        role="button"
    >
        <div class="search-result-item__main">
            <strong>{{ patient.name_display }}</strong>
            <span class="text-muted">({{ patient.sex }}, {{ patient.age }})</span>
        </div>
        <div class="search-result-item__details">
            ICN: {{ patient.icn }} |
            SSN: ***-**-{{ patient.ssn_last4 }} |
            DOB: {{ patient.dob }} |
            Station: {{ patient.station }}
        </div>
    </div>
    {% endfor %}
</div>
{% elif query %}
<p class="text-muted">No patients found matching "{{ query }}"</p>
{% else %}
<p class="text-muted">Enter search criteria above</p>
{% endif %}
